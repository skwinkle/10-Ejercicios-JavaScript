<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Descuentos</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100..900&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="header__logo-container">
            <img class="header__logo" src="imagenes/autism.jpg">
        </div>
        <nav class="header__nav">
            <ul class="header__nav-list">
                <li class="header__nav-item"><a href="index.html">Proyectos</a></li>
            </ul>
        </nav>
    </header>
    <main class="main__ejercicio1">
        <form class="form__ejercicio1" onsubmit="return calcularDescuento()">
            <h1>Calculadora de Descuentos</h1>
            <label> Total de la compra:
                <input type="text" id="totalCompra" class="form__ejercicio1--input" required oninput="validarInput(this)">
            </label>
            <input type="submit" value="Calcular" class="card__button">
            <p id="muestraDescuento"></p>
        </form>
    </main>
    
    <script>
        function validarInput(input) {
            // Reemplaza cualquier carácter que no sea un número o un punto
            let value = input.value.replace(/[^0-9.]/g, '');
    
            // Permitir solo un punto decimal
            const parts = value.split('.');
            if (parts.length > 2) {
                value = parts[0] + '.' + parts.slice(1).join('');
            }
    
            input.value = value;
        }
    
        function calcularDescuento() {
            const totalCompra = parseFloat(document.getElementById('totalCompra').value);
            const descuentoPorcentaje = 0.15; // 15%
            
            // Validar que el total de la compra sea un número válido
            if (!isNaN(totalCompra) && totalCompra >= 0) {
                const descuento = totalCompra * descuentoPorcentaje;
                const totalFinal = totalCompra - descuento;

                document.getElementById('muestraDescuento').textContent = 
                    `Descuento aplicado: $${descuento.toFixed(2)}\nTotal a pagar: $${totalFinal.toFixed(2)}`;
                return false; // Para evitar que el formulario se envíe
            } else {
                document.getElementById('muestraDescuento').textContent = 'Por favor, ingrese un número válido.';
                return false; // Para evitar que el formulario se envíe
            }
        }
    </script>
    
    <footer class="footer">
        <p class="footer__name">Fernández Rojas Axel Giovanni</p>
        <h2 class="footer__Title">Todos los Derechos Reservados</h2>
    </footer>
</body>
</html>